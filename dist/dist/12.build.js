webpackJsonp([12],{320:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(889),r=a(899),n=a(20),i=n(s.a,r.a,!1,null,null,null);e.default=i.exports},889:function(t,e,a){"use strict";var s=(a(57),a(0)),r=(a.n(s),a(30)),n=a(897),i=window.location.hostname,o=(window.location.port,"http://"+i+":3000");e.a={data:function(){return{link:o+"/logger/gets/date/csv",sensor:"soil",data:[],record:0,showGraph:!1,datevalue:"",token:""}},methods:{refresh:function(){var t=this;console.log(this.$route.query),this.showGraph=!1,this.sensor=this.sensor,setTimeout(function(){t.showGraph=!0},2e3)}},components:{Graph:n.a},mounted:function(){var t=this;if(this.data=[],void 0==this.$route.query.date)this.$router.push({path:"/logger"});else{var e=this.$route.query;this.datevalue="DATE"+e.date,this.token=this.$store.getters.authData.tokenId,r.a.get("/logger/gets/date/intervals",{headers:{"x-access-token":this.$store.getters.authData.tokenId},params:{date:"DATE"+e.date,second:e.interval}}).then(function(e){var a=e.data.length;t.$store.commit("popupShow","Records: "+a),setTimeout(function(){t.$store.commit("popupHide")},3e3),a>0?(t.sensor="soil",t.data=e.data,t.showGraph=!0):t.$router.push({path:"/logger"})}).catch(function(t){console.log(t)})}}}},890:function(t,e,a){"use strict";var s=(a(57),a(0)),r=a.n(s);e.a={props:["data","sensor"],data:function(){return{strData:"",date:"",sensorFullName:{soil:"Soil Moisture (%)",temperature:"Temperature (C)",water:"Water (C)",ec:"Conducitivy (mc/ms)",ph:"Acidity",vpd:"Vapor Pressure (Pa)",par:"PAR (Watt/sqm)",humidity:"Humidity (%)",paracc:"PAR Accumulation (J/sqm)",co2:"Carbon dioxide (ppm)",light:"LED (Lux)"}}},methods:{createGraph:function(){var t=this;setTimeout(function(){new Dygraph(document.getElementById("graphdiv"),t.strData,{customBars:!0,title:"Daily "+t.sensorFullName[t.sensor]+" : in "+t.date,ylabel:t.sensorFullName[t.sensor],legend:"always",labelsDivStyles:{textAlign:"right"},showRangeSelector:!0})},500)},craftStringData:function(){var t=this;this.strData="Date,"+this.sensor.toUpperCase()+"\n",this.date=r()(this.data[0].datetime).format("MMM Do YYYY"),this.data.forEach(function(e){var a=e.datetime,s=e[t.sensor]-5+";"+e[t.sensor]+";"+(e[t.sensor]+5),r=a+","+s+"\n";t.strData+=r})}},mounted:function(){this.craftStringData(),this.createGraph()}}},897:function(t,e,a){"use strict";var s=a(890),r=a(898),n=a(20),i=n(s.a,r.a,!1,null,null,null);e.a=i.exports},898:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticStyle:{width:"100%",height:"300px"},attrs:{id:"graphdiv"}})])}],n={render:s,staticRenderFns:r};e.a=n},899:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jarviswidget jarviswidget-color-greenDark jarviswidget-sortable"},[a("header",{staticClass:"ui-sortable-handle",attrs:{role:"heading"}},[t._m(0),t._v(" "),a("h2",[a("strong",[t._v("Graph "+t._s(t.sensor))])])]),t._v(" "),a("div",{attrs:{role:"content"}},[a("div",{staticClass:"jarviswidget-editbox"}),t._v(" "),a("div",{staticClass:"widget-body"},[a("form",{staticClass:"smart-form"},[a("fieldset",[t.showGraph?a("div",{staticClass:"row"},[a("graph",{attrs:{data:t.data,sensor:t.sensor}})],1):t._e(),t._v(" "),a("section",[a("label",[t._v("Choose Sensor")]),t._v(" "),a("label",{staticClass:"select",staticStyle:{"margin-bottom":"20px"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sensor,expression:"sensor"}],staticClass:"input-lg",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sensor=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"soil"}},[t._v("Soil Moisture")]),t._v(" "),a("option",{attrs:{value:"vpd"}},[t._v("VPD")]),t._v(" "),a("option",{attrs:{value:"temperature"}},[t._v("Temperature")]),t._v(" "),a("option",{attrs:{value:"humidity"}},[t._v("Relative Humidity")]),t._v(" "),t._m(1),t._v(" "),a("option",{attrs:{value:"par"}},[t._v("PAR")]),t._v(" "),a("option",{attrs:{value:"paracc"}},[t._v("PAR Accumulation")])]),t._v(" "),a("i")])])]),t._v(" "),a("footer",[a("form",{attrs:{action:t.link,method:"get",target:"_blank"}},[a("input",{attrs:{type:"hidden",name:"date"},domProps:{value:t.datevalue}}),t._v(" "),a("input",{attrs:{type:"hidden",name:"token"},domProps:{value:t.token}}),t._v(" "),t._m(2)]),t._v(" "),a("button",{staticClass:"btn btn-default",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.refresh(e)}}},[a("i",{staticClass:"fa fa-refresh "}),t._v(" Refresh\n          ")])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"jarviswidget-ctrls",attrs:{role:"menu"}},[a("a",{staticClass:"button-icon jarviswidget-fullscreen-btn"},[a("i",{staticClass:"fa fa-expand "})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("option",{attrs:{value:"co2"}},[t._v("CO"),a("sub",[t._v("2")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-save "}),t._v(" Export to .xls\n            ")])}],n={render:s,staticRenderFns:r};e.a=n}});
//# sourceMappingURL=12.build.js.map